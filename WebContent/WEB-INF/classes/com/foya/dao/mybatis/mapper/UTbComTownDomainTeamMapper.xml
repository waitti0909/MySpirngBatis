<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.foya.dao.mybatis.mapper.UTbComTownDomainTeamMapper" >
  <resultMap id="BaseResultMap" type="com.foya.noms.dto.common.TownDomainTeamDTO" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 31 11:49:19 CST 2014.
    -->
    <id column="REGION_ID" property="REGION_ID" jdbcType="VARCHAR" />
    <result column="CITY_ID" property="CITY_ID" jdbcType="VARCHAR" />
    <result column="TOWN_ID" property="TOWN_ID" jdbcType="VARCHAR" />
    <result column="DOMAIN" property="DOMAIN" jdbcType="VARCHAR" />
    <result column="TEAM" property="TEAM" jdbcType="VARCHAR" />
    <result column="GRADES" property="GRADES" jdbcType="VARCHAR" />
    <result column="DOMAIN_NAME" property="domainName" jdbcType="VARCHAR" />
    
    <result column="CITY_NAME" property="cityName" jdbcType="VARCHAR" />
    <result column="TOWN_NAME" property="townName" jdbcType="VARCHAR" />
    
  </resultMap>
  <sql id="Base_Column_List" >
    REGION_ID, CITY_ID, TOWN_ID, DOMAIN, TEAM, GRADES
  </sql>
  <select id="getTownDomainTeamByCityIdTownId" resultMap="BaseResultMap">
    select 
    CITY_ID, TOWN_ID, DOMAIN, TEAM,domain.NAME DOMAIN_NAME
    from TB_COM_TOWN_DOMAIN_TEAM team
    left outer join TB_ORG_DOMAIN domain
    on team.DOMAIN = domain.ID
    where CITY_ID = #{cityId} and TOWN_ID = #{townId}
  </select>
  <select id="getAllTownDomainTeam" resultMap="BaseResultMap">
SELECT
	REGION_ID,
	main.CITY_ID,
	main.TOWN_ID,
	main.DOMAIN,
	TEAM,
	GRADES,
	c.CITY_NAME,
	t.TOWN_NAME
FROM
	TB_COM_TOWN_DOMAIN_TEAM  main,TB_COM_CITY c , TB_COM_TOWN t 
	where main.CITY_ID=c.CITY_ID and main.TOWN_ID=t.TOWN_ID
order by CITY_ID,town_id

  </select>

</mapper>