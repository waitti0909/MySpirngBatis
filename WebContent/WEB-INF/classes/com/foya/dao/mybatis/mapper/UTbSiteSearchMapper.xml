<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.foya.dao.mybatis.mapper.UTbSiteSearchMapper">
  <resultMap id="BaseResultMap" type="com.foya.noms.dto.st.SiteSearchDTO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Dec 10 14:39:41 CST 2014.
    -->
    <id column="SR_ID" jdbcType="VARCHAR" property="SR_ID" />
    <id column="SR_SEQ" jdbcType="VARCHAR" property="SR_SEQ" />
    <result column="WORK_ID" jdbcType="VARCHAR" property="WORK_ID" />
    <result column="SR_PSN" jdbcType="VARCHAR" property="SR_PSN" />
    <result column="SR_EVAL" jdbcType="VARCHAR" property="SR_EVAL" />
    <result column="SITE_ID" jdbcType="VARCHAR" property="SITE_ID" />
    <result column="LOCATION_ID" jdbcType="VARCHAR" property="LOCATION_ID" />
    <result column="LOC_NAME" jdbcType="VARCHAR" property="LOC_NAME" />
    <result column="LOC_TYPE" jdbcType="VARCHAR" property="LOC_TYPE" />
    <result column="LON" jdbcType="DECIMAL" property="LON" />
    <result column="LAT" jdbcType="DECIMAL" property="LAT" />
    <result column="MAINT_AREA" jdbcType="VARCHAR" property="MAINT_AREA" />
    <result column="MAINT_DEPT" jdbcType="VARCHAR" property="MAINT_DEPT" />
    <result column="MAINT_TEAM" jdbcType="VARCHAR" property="MAINT_TEAM" />
    <result column="MAINT_USER" jdbcType="VARCHAR" property="MAINT_USER" />
    <result column="LOC_DESC" jdbcType="VARCHAR" property="LOC_DESC" />
    <result column="BASE_TYPE" jdbcType="VARCHAR" property="BASE_TYPE" />
    <result column="INDOOR_OPTION" jdbcType="VARCHAR" property="INDOOR_OPTION" />
    <result column="NS_LEVEL" jdbcType="VARCHAR" property="NS_LEVEL" />
    <result column="BUILDING_HEIGHT" jdbcType="NUMERIC" property="BUILDING_HEIGHT" />
    <result column="SHARE_TYPE" jdbcType="CHAR" property="SHARE_TYPE" />
    <result column="IS_FREEENTER" jdbcType="CHAR" property="IS_FREEENTER" />
    <result column="IS_KEY" jdbcType="CHAR" property="IS_KEY" />
    <result column="IS_INDOOR" jdbcType="CHAR" property="IS_INDOOR" />
    <result column="NEED_MISC_LIC" jdbcType="CHAR" property="NEED_MISC_LIC" />
    <result column="HAS_MISC_LIC" jdbcType="CHAR" property="HAS_MISC_LIC" />
    <result column="LINE_REACHABLE" jdbcType="CHAR" property="LINE_REACHABLE" />
    <result column="ADDR" jdbcType="VARCHAR" property="ADDR" />
    <result column="ZIP" jdbcType="VARCHAR" property="ZIP" />
    <result column="CITY" jdbcType="VARCHAR" property="CITY" />
    <result column="AREA" jdbcType="VARCHAR" property="AREA" />
    <result column="VILLAGE" jdbcType="VARCHAR" property="VILLAGE" />
    <result column="ADJACENT" jdbcType="VARCHAR" property="ADJACENT" />
    <result column="ROAD" jdbcType="VARCHAR" property="ROAD" />
    <result column="LANE" jdbcType="VARCHAR" property="LANE" />
    <result column="ALLEY" jdbcType="VARCHAR" property="ALLEY" />
    <result column="SUB_ALLEY" jdbcType="VARCHAR" property="SUB_ALLEY" />
    <result column="DOOR_NO" jdbcType="VARCHAR" property="DOOR_NO" />
    <result column="DOOR_NO_EX" jdbcType="VARCHAR" property="DOOR_NO_EX" />
    <result column="FLOOR" jdbcType="VARCHAR" property="FLOOR" />
    <result column="FLOOR_EX" jdbcType="VARCHAR" property="FLOOR_EX" />
    <result column="ROOM" jdbcType="VARCHAR" property="ROOM" />
    <result column="ADD_OTHER" jdbcType="VARCHAR" property="ADD_OTHER" />
    <result column="SR_DATE" jdbcType="VARCHAR" property="SR_DATE" />
    <result column="BUILDING_FLOOR" jdbcType="VARCHAR" property="BUILDING_FLOOR" />
    <result column="EXPECT_RENT" jdbcType="NUMERIC" property="EXPECT_RENT" />
    <result column="ANT_STAND" jdbcType="VARCHAR" property="ANT_STAND" />
    <result column="ANT_S_HIGHT" jdbcType="INTEGER" property="ANT_S_HIGHT" />
    <result column="ANT_C_HIGHT" jdbcType="INTEGER" property="ANT_C_HIGHT" />
    <result column="SPACE_ROOM" jdbcType="CHAR" property="SPACE_ROOM" />
    <result column="SPACE_ROOF" jdbcType="CHAR" property="SPACE_ROOF" />
    <result column="SPACE_TOP" jdbcType="CHAR" property="SPACE_TOP" />
    <result column="SPACE_PLATFORM" jdbcType="CHAR" property="SPACE_PLATFORM" />
    <result column="SPACE_LAND" jdbcType="CHAR" property="SPACE_LAND" />
    <result column="SPACE_INDOOR" jdbcType="CHAR" property="SPACE_INDOOR" />
    <result column="SPACE_OUTDOOR" jdbcType="CHAR" property="SPACE_OUTDOOR" />
    <result column="FOOTAGE" jdbcType="DECIMAL" property="FOOTAGE" />
    <result column="EMP_RELATION" jdbcType="VARCHAR" property="EMP_RELATION" />
    <result column="CR_USER" jdbcType="VARCHAR" property="CR_USER" />
    <result column="CR_TIME" jdbcType="TIMESTAMP" property="CR_TIME" />
    <result column="MD_USER" jdbcType="VARCHAR" property="MD_USER" />
    <result column="MD_TIME" jdbcType="TIMESTAMP" property="MD_TIME" />
    <result column="CHN_NM" jdbcType="VARCHAR" property="chnName" />
    <result column="BTS_SITE_ID" property="btsSiteId" jdbcType="VARCHAR" />
    <result column="SEARCH_RESULT" jdbcType="CHAR" property="SEARCH_RESULT" />
    <association property="tbSiteSrSiteTemp" column="SR_SEQ"
			javaType="com.foya.dao.mybatis.model.TbSiteSrSiteTemp" resultMap="BaseResultMapTemp" />		
  </resultMap>
  
  <resultMap id="BaseResultMapTemp" type="com.foya.dao.mybatis.model.TbSiteSrSiteTemp" >
    <id column="tempSrId" property="SR_ID" jdbcType="VARCHAR" />
    <id column="tempSrSeq" property="SR_SEQ" jdbcType="VARCHAR" />
    <id column="tempSiteId" property="SITE_ID" jdbcType="VARCHAR" />
    <result column="FEQ_ID" property="FEQ_ID" jdbcType="VARCHAR" />
    <result column="BTS_SITE_ID" property="BTS_SITE_ID" jdbcType="VARCHAR" />
    <result column="tempLocationId" property="LOCATION_ID" jdbcType="VARCHAR" />
    <result column="SITE_NAME" property="SITE_NAME" jdbcType="VARCHAR" />
    <result column="PURPOSE" property="PURPOSE" jdbcType="VARCHAR" />
    <result column="EQP_TYPE_ID" property="EQP_TYPE_ID" jdbcType="VARCHAR" />
    <result column="EQP_MODEL_ID" property="EQP_MODEL_ID" jdbcType="VARCHAR" />
    <result column="COVERAGE_TYPE" property="COVERAGE_TYPE" jdbcType="CHAR" />
    <result column="BTS_CONFIG" property="BTS_CONFIG" jdbcType="VARCHAR" />
    <result column="DONOR_SITE" property="DONOR_SITE" jdbcType="VARCHAR" />
    <result column="FEEDERLESS" property="FEEDERLESS" jdbcType="VARCHAR" />
    <result column="MASTER_SITE" property="MASTER_SITE" jdbcType="VARCHAR" />
    <result column="CLUSTER" property="CLUSTER" jdbcType="VARCHAR" />
    <result column="RNC_BTS" property="RNC_BTS" jdbcType="VARCHAR" />
    <result column="NIOS_RPT_STATUS" property="NIOS_RPT_STATUS" jdbcType="VARCHAR" />
    <result column="CELL_STATUS" property="CELL_STATUS" jdbcType="VARCHAR" />
    <result column="OMCU_OBJ" property="OMCU_OBJ" jdbcType="VARCHAR" />
    <result column="SPEED_DOWNLOAD" property="SPEED_DOWNLOAD" jdbcType="VARCHAR" />
    <result column="SPEED_UPLOAD" property="SPEED_UPLOAD" jdbcType="VARCHAR" />
    <result column="POWER" property="POWER" jdbcType="VARCHAR" />
    <result column="CST_ID_CARD_NUM" property="CST_ID_CARD_NUM" jdbcType="VARCHAR" />
    <result column="CST_MOBILE" property="CST_MOBILE" jdbcType="VARCHAR" />
    <result column="CST_ID" property="CST_ID" jdbcType="VARCHAR" />
    <result column="COVERAGE_INDOOR" property="COVERAGE_INDOOR" jdbcType="CHAR" />
    <result column="HIDDEN" property="HIDDEN" jdbcType="CHAR" />
    <result column="NOIS_ON_AIR" property="NOIS_ON_AIR" jdbcType="CHAR" />
    <result column="L2_SWITCH" property="l2_SWITCH" jdbcType="CHAR" />
    <result column="tempCrUser" property="CR_USER" jdbcType="VARCHAR" />
    <result column="tempCrTime" property="CR_TIME" jdbcType="TIMESTAMP" />
    <result column="tempMdUser" property="MD_USER" jdbcType="VARCHAR" />
    <result column="tempMdTime" property="MD_TIME" jdbcType="TIMESTAMP" />
    <result column="COVERAGE_IN_FLOOR" property="COVERAGE_IN_FLOOR" jdbcType="VARCHAR" />  
  </resultMap>
  
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 23 16:02:41 CST 2014.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 23 16:02:41 CST 2014.
    -->
    SR_ID, SR_SEQ, WORK_ID, SR_PSN, SR_EVAL, SITE_ID, LOCATION_ID, LOC_NAME, LOC_TYPE, 
    LON, LAT, MAINT_AREA, MAINT_DEPT, MAINT_TEAM, MAINT_USER, LOC_DESC, BASE_TYPE, INDOOR_OPTION, 
    NS_LEVEL, BUILDING_HEIGHT, SHARE_TYPE, IS_FREEENTER, IS_KEY, IS_INDOOR, 
    NEED_MISC_LIC, HAS_MISC_LIC, LINE_REACHABLE, ADDR, ZIP, CITY, AREA, VILLAGE, ADJACENT, 
    ROAD, LANE, ALLEY, SUB_ALLEY, DOOR_NO, DOOR_NO_EX, FLOOR, FLOOR_EX, ROOM, ADD_OTHER, 
    SR_DATE, BUILDING_FLOOR, EXPECT_RENT, ANT_STAND, ANT_S_HIGHT, ANT_C_HIGHT, SPACE_ROOM, 
    SPACE_ROOF, SPACE_TOP, SPACE_PLATFORM, SPACE_LAND, SPACE_INDOOR, SPACE_OUTDOOR, FOOTAGE, 
    EMP_RELATION, CR_USER, CR_TIME, MD_USER, MD_TIME
  </sql>  
   
  <select id="selectByPk" resultMap="BaseResultMap">
       select 
    siteSearch.SR_ID ,SR_SEQ ,siteSearch.SITE_ID ,SR_DATE ,psn.CHN_NM CHN_NM ,siteSearch.ADDR ,
	LON ,LAT ,BASE_TYPE ,BUILDING_HEIGHT ,BUILDING_FLOOR ,INDOOR_OPTION ,
	IS_FREEENTER ,IS_KEY ,IS_INDOOR , NEED_MISC_LIC ,HAS_MISC_LIC,
	LINE_REACHABLE , EXPECT_RENT , SHARE_TYPE,ANT_STAND ,ANT_C_HIGHT ,ANT_S_HIGHT,
	LOC_DESC,SEARCH_RESULT,work.BTS_SITE_ID BTS_SITE_ID
	from TB_SITE_SEARCH siteSearch
	left outer join TB_AUTH_PERSONNEL psn
	on siteSearch.SR_PSN = psn.PSN_NO
	left outer join tb_site_work work
	on siteSearch.SITE_ID = work.SITE_ID
    where siteSearch.SR_ID = #{srId}
      and siteSearch.SR_SEQ = #{srSeq}
  </select>
  
  <select id="selectByExample" parameterType="com.foya.dao.mybatis.model.TbSiteSearchExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 23 16:02:41 CST 2014.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from TB_SITE_SEARCH
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  
  <select id="selectSearchTable" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
		<include refid="siteSearchColumns" /> ,
		<include refid="siteSrSiteTempColumns" />
    from TB_SITE_SEARCH siteSearch
    left outer join TB_SITE_SR_SITE_TEMP siteTemp
	    on siteSearch.SR_ID = siteTemp.SR_ID
		and siteSearch.SR_SEQ = siteTemp.SR_SEQ 
    where siteSearch.SR_ID=#{srId}
    and siteSearch.SR_SEQ=#{srSeq}
  </select>  
  
  <sql id="siteSearchColumns">
  	    siteSearch.SR_ID, siteSearch.SR_SEQ, siteSearch.SR_PSN, siteSearch.SR_EVAL, 
  	    siteSearch.WORK_ID, siteSearch.SITE_ID, siteSearch.LOCATION_ID, siteSearch.LOC_NAME, 
  	    siteSearch.LOC_TYPE, siteSearch.LON, siteSearch.LAT, siteSearch.MAINT_AREA, 
  	    siteSearch.MAINT_DEPT, siteSearch.MAINT_TEAM, siteSearch.MAINT_USER, siteSearch.LOC_DESC, 
  	    siteSearch.BASE_TYPE, siteSearch.INDOOR_OPTION, siteSearch.NS_LEVEL, siteSearch.BUILDING_HEIGHT, 
  	    siteSearch.SHARE_TYPE, siteSearch.IS_FREEENTER, siteSearch.IS_KEY, 
  	    siteSearch.IS_INDOOR, siteSearch.NEED_MISC_LIC, siteSearch.HAS_MISC_LIC, siteSearch.LINE_REACHABLE, 
  	    siteSearch.ADDR, siteSearch.ZIP, siteSearch.CITY, siteSearch.AREA, 
  	    siteSearch.VILLAGE, siteSearch.ADJACENT, siteSearch.ROAD, siteSearch.LANE, 
  	    siteSearch.ALLEY, siteSearch.SUB_ALLEY, siteSearch.DOOR_NO, siteSearch.DOOR_NO_EX, 
  	    siteSearch.FLOOR, siteSearch.FLOOR_EX, siteSearch.ROOM, siteSearch.ADD_OTHER, 
	    siteSearch.SR_DATE, siteSearch.BUILDING_FLOOR, siteSearch.EXPECT_RENT, siteSearch.ANT_STAND, 
	    siteSearch.ANT_S_HIGHT, siteSearch.ANT_C_HIGHT, siteSearch.CR_USER, siteSearch.CR_TIME, 
	    siteSearch.MD_USER, siteSearch.MD_TIME, siteSearch.SPACE_ROOM, siteSearch.SPACE_ROOF, 
	    siteSearch.SPACE_TOP, siteSearch.SPACE_PLATFORM, siteSearch.SPACE_LAND, siteSearch.SPACE_INDOOR, 
	    siteSearch.SPACE_OUTDOOR, siteSearch.FOOTAGE, siteSearch.EMP_RELATION
  </sql>
    
  <sql id="siteSrSiteTempColumns">
  		siteTemp.SR_ID AS tempSrId,
  		siteTemp.SR_SEQ AS tempSrSeq,
  		siteTemp.SITE_ID AS tempSiteId, 
  		siteTemp.LOCATION_ID AS tempLocationId,
  		siteTemp.FEQ_ID, siteTemp.BTS_SITE_ID, 
  		siteTemp.SITE_NAME, siteTemp.PURPOSE, 
  		siteTemp.EQP_TYPE_ID, siteTemp.EQP_MODEL_ID, 
  		siteTemp.COVERAGE_TYPE, siteTemp.BTS_CONFIG, 
  		siteTemp.DONOR_SITE, siteTemp.FEEDERLESS,
  		siteTemp.MASTER_SITE, siteTemp.CLUSTER, 
  		siteTemp.RNC_BTS, siteTemp.NIOS_RPT_STATUS,
  		siteTemp.CELL_STATUS, siteTemp.OMCU_OBJ, 
  		siteTemp.SPEED_DOWNLOAD, siteTemp.SPEED_UPLOAD,
  		siteTemp.POWER, siteTemp.CST_ID_CARD_NUM, 
  		siteTemp.CST_MOBILE, siteTemp.CST_ID,
  		siteTemp.COVERAGE_INDOOR, siteTemp.HIDDEN, 
  		siteTemp.NOIS_ON_AIR, siteTemp.L2_SWITCH,
  		siteTemp.CR_USER AS tempCrUser, 
  		siteTemp.CR_TIME AS tempCrTime, 
  		siteTemp.MD_USER AS tempMdUser, 
  		siteTemp.MD_TIME AS tempMdTime,
  		siteTemp.COVERAGE_IN_FLOOR
  </sql>
  
  <update id="updateSearchRecord">
  	update TB_SITE_SEARCH
  	set 
  		SR_PSN = #{srPsn},
   		SR_DATE = #{srDate},
   		SR_EVAL = #{srEval},
   		ADDR = #{address},
   		LON = #{siteLon},
   		LAT = #{siteLat},
   		BASE_TYPE = #{baseType},
   		BUILDING_HEIGHT = #{height},
   		BUILDING_FLOOR = #{floor},
   		INDOOR_OPTION = #{inBuilding},
   		IS_FREEENTER = #{isFreeEnter},
   		IS_KEY = #{isKey},
   		IS_INDOOR = #{isInDoor},
   		NEED_MISC_LIC = #{needMiscLic},
   		HAS_MISC_LIC = #{hasMiscLic},
   		LINE_REACHABLE = #{lineReachable},
   		EXPECT_RENT = #{expectRent},
   		SHARE_TYPE = #{shareType},
  		ANT_STAND = #{antStand},
   		ANT_S_HIGHT = #{antSHight},
   		ANT_C_HIGHT = #{antCHight},
   		SPACE_ROOM = #{spaceRoom},
   		SPACE_ROOF = #{spaceRoof},
   		SPACE_TOP = #{spaceTop},
   		SPACE_PLATFORM = #{spacePlatform},
   		SPACE_LAND = #{spaceLand},
   		SPACE_INDOOR = #{spaceIndoor},
   		SPACE_OUTDOOR = #{spaceOutdoor},
   		FOOTAGE = #{footAge},
   		EMP_RELATION = #{empRelation},
   		LOC_DESC = #{locDesc},
   		MD_USER = #{mdUser ,jdbcType=VARCHAR},
 		LOC_NAME = #{siteTempName},
 		ZIP = #{qq_zip},
 		CITY = #{qq_city},
 		AREA = #{qq_area},
 		VILLAGE = #{qq_village},
 		ADJACENT = #{qq_adjacent},
 		ROAD = #{qq_road},
 		LANE = #{qq_lane},
 		ALLEY = #{qq_alley},
 		SUB_ALLEY = #{qq_subAlley},
 		DOOR_NO = #{qq_doorNo},
 		DOOR_NO_EX = #{qq_doorNoEx},
 		FLOOR = #{qq_floor},
 		FLOOR_EX = #{qq_floorEx},
 		ROOM = #{qq_room},
 		ADD_OTHER = #{qq_remark},		 				 		 		 		
  		MD_TIME = GETDATE()
	where SR_ID = #{srId}
	and   SR_SEQ = #{srSeq}
  </update>
  
</mapper>