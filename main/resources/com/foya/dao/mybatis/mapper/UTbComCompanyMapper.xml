<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.foya.dao.mybatis.mapper.UTbComCompanyMapper">
  <resultMap id="BaseResultMap" type="com.foya.noms.dto.basic.CompanyDTO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Nov 14 10:40:43 CST 2014.
    -->
    <id column="CO_VAT_NO" jdbcType="VARCHAR" property="CO_VAT_NO" />
    <result column="CO_NAME" jdbcType="VARCHAR" property="CO_NAME" />
    <result column="CO_SITE_TYPE" jdbcType="VARCHAR" property="CO_SITE_TYPE" />
    <result column="TYPE_ENG" jdbcType="CHAR" property="TYPE_ENG" />
    <result column="TYPE_EQU" jdbcType="CHAR" property="TYPE_EQU" />
    <result column="TYPE_WH" jdbcType="CHAR" property="TYPE_WH" />
    <result column="CO_TEL" jdbcType="VARCHAR" property="CO_TEL" />
    <result column="CO_FAX" jdbcType="VARCHAR" property="CO_FAX" />
    <result column="CONTACT" jdbcType="VARCHAR" property="CONTACT" />
    <result column="CON_TITLE" jdbcType="VARCHAR" property="CON_TITLE" />
    <result column="CON_MOBILE" jdbcType="VARCHAR" property="CON_MOBILE" />
    <result column="CON_EMAIL" jdbcType="VARCHAR" property="CON_EMAIL" />
    <result column="CONTACT2" jdbcType="VARCHAR" property="CONTACT2" />
    <result column="CON_TITLE2" jdbcType="VARCHAR" property="CON_TITLE2" />
    <result column="CON_MOBILE2" jdbcType="VARCHAR" property="CON_MOBILE2" />
    <result column="CON_EMAIL2" jdbcType="VARCHAR" property="CON_EMAIL2" />
    <result column="CTR_RELATION" jdbcType="CHAR" property="CTR_RELATION" />
    <result column="MEMO" jdbcType="VARCHAR" property="MEMO" />
    <result column="ACTIVATE" jdbcType="CHAR" property="ACTIVATE" />
    <result column="CTR_TERM" jdbcType="VARCHAR" property="CTR_TERM" />
    <result column="INSURANCE" jdbcType="CHAR" property="INSURANCE" />
    <result column="INS_AMOUNT" jdbcType="DECIMAL" property="INS_AMOUNT" />
    <result column="ERP_ID" jdbcType="VARCHAR" property="ERP_ID" />
    <result column="ADDR" jdbcType="VARCHAR" property="ADDR" />
    <result column="ZIP" jdbcType="VARCHAR" property="ZIP" />
    <result column="CITY" jdbcType="VARCHAR" property="CITY" />
    <result column="AREA" jdbcType="VARCHAR" property="AREA" />
    <result column="VILLAGE" jdbcType="VARCHAR" property="VILLAGE" />
    <result column="ADJACENT" jdbcType="VARCHAR" property="ADJACENT" />
    <result column="ROAD" jdbcType="VARCHAR" property="ROAD" />
    <result column="LANE" jdbcType="VARCHAR" property="LANE" />
    <result column="ALLEY" jdbcType="VARCHAR" property="ALLEY" />
    <result column="SUB_ALLEY" jdbcType="VARCHAR" property="SUB_ALLEY" />
    <result column="DOOR_NO" jdbcType="VARCHAR" property="DOOR_NO" />
    <result column="DOOR_NO_EX" jdbcType="VARCHAR" property="DOOR_NO_EX" />
    <result column="FLOOR" jdbcType="VARCHAR" property="FLOOR" />
    <result column="FLOOR_EX" jdbcType="VARCHAR" property="FLOOR_EX" />
    <result column="ROOM" jdbcType="VARCHAR" property="ROOM" />
    <result column="ADD_OTHER" jdbcType="VARCHAR" property="ADD_OTHER" />
    <result column="CR_USER" jdbcType="VARCHAR" property="CR_USER" />
    <result column="CR_TIME" jdbcType="TIMESTAMP" property="CR_TIME" />
    <result column="MD_USER" jdbcType="VARCHAR" property="MD_USER" />
    <result column="MD_TIME" jdbcType="TIMESTAMP" property="MD_TIME" />
    <result column="CO_ERP_NO" jdbcType="VARCHAR" property="CO_ERP_NO" />
  </resultMap>
  <sql id="Base_Column_List">
    CO_VAT_NO, CO_NAME, CO_SITE_TYPE, TYPE_ENG, TYPE_EQU, TYPE_WH, CO_TEL, CO_FAX, CONTACT, 
    CON_TITLE, CON_MOBILE, CON_EMAIL, CONTACT2, CON_TITLE2, CON_MOBILE2, CON_EMAIL2, 
    CTR_RELATION, MEMO, ACTIVATE, CTR_TERM, INSURANCE, INS_AMOUNT, ERP_ID, 
    ADDR, ZIP, CITY, AREA, VILLAGE, ADJACENT, ROAD, LANE, ALLEY, SUB_ALLEY, DOOR_NO, 
    DOOR_NO_EX, FLOOR, FLOOR_EX, ROOM, ADD_OTHER, CR_USER, CR_TIME, MD_USER, MD_TIME
  </sql>

	<select id="selectCompanyAllList" resultMap="BaseResultMap">
		select 
		CO_VAT_NO, CO_NAME
		from TB_COM_COMPANY
	</select>
	
	<select id="selectCompanyList" resultMap="BaseResultMap">
		select 
		CO_VAT_NO, CO_NAME
		from TB_COM_COMPANY
		where 
		CO_VAT_NO = #{coVatNo}
	</select>	
	<select id="selectTbComCompany" resultMap="BaseResultMap">
     	SELECT DISTINCT A.CO_NAME CO_NAME, 
     	       A.CO_VAT_NO CO_VAT_NO
     	FROM  dbo.TB_COM_COMPANY A, dbo.TB_COM_PO_MAIN B
        WHERE 
     	A.CO_VAT_NO = B.CO_VAT_NO
        AND B.PO_TYPE = 'T'
        AND A.ACTIVATE = 'Y'
<!--         AND B.START_DATE &lt;= #{todateTime} -->
<!--         AND B.END_DATE   &gt;= #{todateTime} -->
    </select>
    
    <select id="selectTbComCompanybyN" resultMap="BaseResultMap">
       SELECT DISTINCT A.CO_NAME CO_NAME, 
     	       A.CO_VAT_NO CO_VAT_NO
     	FROM  dbo.TB_COM_COMPANY A, dbo.TB_COM_PO_MAIN B
        WHERE 
     	A.CO_VAT_NO = B.CO_VAT_NO
        AND B.PO_TYPE = 'T'
        AND A.TYPE_ENG = 'Y'
        AND A.ACTIVATE = 'Y'
    </select>
    
    <select id="selectTbComCompanybyGeneral" resultMap="BaseResultMap">
       SELECT DISTINCT A.CO_NAME CO_NAME, 
     	       A.CO_VAT_NO CO_VAT_NO
     	FROM  dbo.TB_COM_COMPANY A, dbo.TB_COM_PO_MAIN B
        WHERE 
        A.CO_VAT_NO = B.CO_VAT_NO
        AND B.PO_TYPE = 'P'
        AND A.TYPE_ENG = 'Y'
        AND A.ACTIVATE = 'Y'
    </select>
    <select id="selectTbComCompanybyOutsourcing" resultMap="BaseResultMap">
       SELECT DISTINCT A.CO_NAME CO_NAME, 
     	       A.CO_VAT_NO CO_VAT_NO
     	FROM  dbo.TB_COM_COMPANY A, dbo.TB_COM_PO_MAIN B
        WHERE 
     	A.CO_VAT_NO = B.CO_VAT_NO
        AND B.PO_TYPE='T'
        AND A.ACTIVATE='Y'
    </select>
    <select id="selectCompanyByCondition" resultMap="BaseResultMap">
       SELECT
       	CO_VAT_NO,CO_UBN_NO,CO_NAME,CO_ERP_NO
     	FROM  dbo.TB_COM_COMPANY
        <where>
			<if test="ubnNo !=null and ubnNo !=''">
				AND CO_UBN_NO = #{ubnNo}
			</if>
			<if test="erpNo !=null and erpNo !=''">
				AND CO_ERP_NO = #{erpNo}
			</if>
			<if test="comName !=null and comName !=''">
				AND CO_NAME like '%'+#{comName}+'%'
			</if>
		</where>
    </select>
</mapper>